# Lumos-Stock å…¨é¢é—®é¢˜åˆ†ææŠ¥å‘Š

> åˆ†ææ—¥æœŸ: 2025-01-17
> ä»£ç è§„æ¨¡: 101 ä¸ªæ–‡ä»¶ï¼Œ~20,000+ è¡Œä»£ç 
> åˆ†æèŒƒå›´: å‰ç«¯ Vue 3 + åç«¯ Go + æ•°æ®åº“ + æ¶æ„è®¾è®¡

---

## ä¸€ã€é¡¹ç›®æ¦‚å†µ

### 1.1 åŸºæœ¬ä¿¡æ¯

```
é¡¹ç›®åç§°: lumos-stock (åŸ go-stock)
é¡¹ç›®ç±»å‹: Wails æ¡Œé¢åº”ç”¨
æ ¸å¿ƒåŠŸèƒ½: AI èµ‹èƒ½è‚¡ç¥¨åˆ†æå·¥å…·
æŠ€æœ¯æ ˆ:
  - åç«¯: Go 1.25.0 + Wails v2
  - å‰ç«¯: Vue 3.5.17 + Naive UI + TDesign
  - æ•°æ®åº“: SQLite (GORM)
  - AI é›†æˆ: Cloudwego Eino æ¡†æ¶
```

### 1.2 ä»£ç ç»Ÿè®¡

| ç±»åˆ« | æ•°é‡ | è¯´æ˜ |
|------|------|------|
| æ€»æ–‡ä»¶æ•° | 101 | å…¨ä»£ç åº“ |
| åç«¯ä»£ç  | ~11,486 è¡Œ | Go ä»£ç  |
| å‰ç«¯ä»£ç  | ~7,977 è¡Œ | Vue ç»„ä»¶ |
| åç«¯å‡½æ•° | 469 ä¸ª | Go å‡½æ•° |
| Agent å·¥å…· | 11 ä¸ª | AI å·¥å…·å‡½æ•° |
| æ•°æ®æ¨¡å‹ | 50+ ä¸ª | GORM Models |

---

## äºŒã€å‰ç«¯é—®é¢˜åˆ†æ

### 2.1 æ¶æ„é—®é¢˜ ğŸ”´ ä¸¥é‡

#### é—®é¢˜ A: ç»„ä»¶åº“æ··ç”¨å¯¼è‡´çš„æŠ€æœ¯å€ºåŠ¡

```
å½“å‰çŠ¶æ€:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âŒ TDesign Vue Next Chat (t-chat, t-chat-sender)
âŒ Naive UI (NButton, NSelect, NImage, NFlex ç­‰)
âŒ Ionicons + Vicons (å›¾æ ‡åº“æ··ç”¨)

ä»£ç è¯æ®:
import { TButton, TChat, TChatSender } from 'tdesign-vue-next'
import { NButton, NSelect, NImage } from 'naive-ui'
import { ArrowDownIcon } from 'tdesign-icons-vue-next'
import { Robot } from '@vicons/fa'

å½±å“:
1. åŒ…ä½“ç§¯å¢å¤§ (3 å¥— UI åº“)
2. æ ·å¼å†²çª (CSS ä¼˜å…ˆçº§æ··ä¹±)
3. ä¸»é¢˜åˆ‡æ¢å¤æ‚ (éœ€è¦åŒæ—¶å¤„ç†ä¸¤å¥—ä¸»é¢˜)
4. API ä¸ç»Ÿä¸€ (å¼€å‘ä½“éªŒå·®)
5. ç»´æŠ¤æˆæœ¬é«˜ (å‡çº§æ—¶éœ€åŒæ­¥å¤šä¸ªåº“)
```

#### é—®é¢˜ B: çŠ¶æ€ç®¡ç†ç¼ºå¤±

```
å½“å‰çŠ¶æ€:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âŒ æ—  Vuex/Pinia å…¨å±€çŠ¶æ€ç®¡ç†
âŒ ç»„ä»¶é—´é€šä¿¡ä¾èµ– Wails Events (EventsOn/EventsEmit)
âŒ é…ç½®åˆ†æ•£åœ¨å„ä¸ªç»„ä»¶ä¸­

ä»£ç è¯æ®:
// App.vue - é…ç½®åŠ è½½
GetConfig().then((res) => {
  enableFund.value = res.enableFund
  enableAgent.value = res.enableAgent
})

// settings.vue - é…ç½®ä¿®æ”¹
// agent-chat.vue - é…ç½®ä½¿ç”¨

å½±å“:
1. çŠ¶æ€ä¸ä¸€è‡´é£é™©
2. ç»„ä»¶è€¦åˆåº¦é«˜
3. è°ƒè¯•å›°éš¾
4. æ— æ³•å®ç°çŠ¶æ€æŒä¹…åŒ–
5. æ— æ³•å®ç°æ—¶é—´æ—…è¡Œè°ƒè¯•
```

#### é—®é¢˜ C: ç¼ºä¹åˆ†å±‚æ¶æ„

```
å½“å‰æ¶æ„:
ç»„ä»¶ â†’ Wails Events â†’ Go API â†’ æ•°æ®åº“
       â†˜ (ç›´æ¥è°ƒç”¨)
       Wails Bindings

é—®é¢˜:
âŒ æ—  Service å±‚æŠ½è±¡
âŒ æ—  Repository å±‚å°è£…
âŒ æ— ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
âŒ æ— è¯·æ±‚æ‹¦æˆª/å“åº”è½¬æ¢
âŒ æ— ç¼“å­˜ç­–ç•¥å±‚

åº”è¯¥:
ç»„ä»¶ â†’ Composables â†’ Service â†’ API â†’ Repository â†’ æ•°æ®åº“
```

---

### 2.2 UI/UX é—®é¢˜ ğŸŸ¡ ä¸­ç­‰

#### é—®é¢˜ D: agent-chat.vue æ¸²æŸ“é—®é¢˜ (æ ¸å¿ƒ)

```vue
<!-- å½“å‰ä»£ç é—®é¢˜ -->
<template>
  <t-chat :data="chatList" ...>
    <template #content="{ item, index }">
      <!-- âŒ TDesign ç»„ä»¶å¯èƒ½ç¼“å­˜å¯¹è±¡å¼•ç”¨ -->
      <t-chat-content :content="item.content" />
    </template>
  </t-chat>
</template>

<script>
// âŒ ç´¯ç§¯é€»è¾‘å¤æ‚ä¸”ä¸å¯é 
const accumulatedContent = ref('');
const accumulatedReasoning = ref('');

EventsOn("agent-message", (data) => {
  // âŒ ä¾èµ– map åˆ›å»ºæ–°æ•°ç»„ï¼Œæ€§èƒ½å·®
  const newChatList = chatList.value.map((item, idx) => {
    if (idx === lastIndex) {
      return { ...item, content: accumulatedContent.value };
    }
    return item;
  });
  chatList.value = newChatList;
});
</script>

é—®é¢˜åˆ†æ:
1. AI æµå¼è¾“å‡ºä»…æ˜¾ç¤º 2 å­—ç¬¦ "æˆ‘æ˜¯," ååœæ­¢
2. TDesign ç»„ä»¶å†…éƒ¨ç¼“å­˜æœºåˆ¶å¯¼è‡´ä¸æ›´æ–°
3. map æ“ä½œæ€§èƒ½å¼€é”€å¤§ (æ¯æ¬¡æµå¼æ›´æ–°éƒ½æ‰§è¡Œ)
4. çŠ¶æ€ç®¡ç†æ··ä¹± (3 ä¸ª ref å˜é‡)

ç”¨æˆ·å½±å“:
ğŸ”´ æ ¸å¿ƒåŠŸèƒ½ä¸å¯ç”¨
```

#### é—®é¢˜ E: å“åº”å¼å¸ƒå±€ç¼ºå¤±

```css
/* ç¡¬ç¼–ç æ ·å¼ */
.chat-sender .model-select .t-select {
  width: 112px;  /* âŒ å›ºå®šå®½åº¦ */
}

.bottomBtn {
  bottom: 210px;  /* âŒ å›ºå®šä½ç½® */
}

NSelect {
  style="width: 200px;"  /* âŒ å†…è”æ ·å¼ */
}

å½±å“:
âŒ ç§»åŠ¨ç«¯ä½“éªŒå·®
âŒ å°å±å¹•æ— æ³•ä½¿ç”¨
âŒ æ— æ³•è‡ªé€‚åº”ä¸åŒåˆ†è¾¨ç‡
```

#### é—®é¢˜ F: äº¤äº’åŠŸèƒ½ä¸å®Œæ•´

```
ç¼ºå¤±åŠŸèƒ½:
âŒ åœæ­¢ç”Ÿæˆ (fetchCancel ä¸€ç›´æ˜¯ null)
âŒ é‡æ–°ç”Ÿæˆå›å¤
âŒ ç¼–è¾‘å¹¶é‡æ–°å‘é€
âŒ å¯¹è¯å†å²ç®¡ç†
âŒ æœç´¢å†å²å¯¹è¯
âŒ å¯¼å‡ºå¯¹è¯è®°å½•
âŒ æ¶ˆæ¯åˆ†æ”¯ç®¡ç†
âŒ å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡åˆ‡æ¢

ä»£ç è¯æ®:
const onStop = function () {
  if (fetchCancel.value) {  // âŒ fetchCancel æ°¸è¿œæ˜¯ null
    fetchCancel.value.controller.close();
    // ...
  }
};
```

---

### 2.3 ä»£ç è´¨é‡é—®é¢˜ ğŸŸ¡ ä¸­ç­‰

#### é—®é¢˜ G: ä»£ç é‡å¤

```
1. å¤‡ä»½æ–‡ä»¶æœªåˆ é™¤
   - agent-chat.vue (500+ è¡Œ)
   - agent-chat_bk.vue (500+ è¡Œ) âŒ é‡å¤ä»£ç 

2. API è°ƒç”¨é‡å¤
å„ç»„ä»¶ç‹¬ç«‹è°ƒç”¨:
import { ChatWithAgent } from "../../wailsjs/go/main/App"
import { GetConfig } from "../../wailsjs/go/main/App"
import { GetAiConfigs } from "../../wailsjs/go/main/App"
// âŒ æ— ç»Ÿä¸€å°è£…

3. æ ·å¼é‡å¤
.message { ... }  /* åœ¨å¤šä¸ªç»„ä»¶ä¸­é‡å¤ */
.card { ... }     /* ç±»ä¼¼å¡ç‰‡æ ·å¼é‡å¤å®šä¹‰ */
```

#### é—®é¢˜ H: è°ƒè¯•ä»£ç æœªæ¸…ç†

```javascript
console.log('=== RAW DATA FROM GO ===')
console.log('typeof data:', typeof data)
console.log('data keys:', Object.keys(data || {}))
console.log('full data:', JSON.stringify(data, null, 2))
console.log('ğŸ“¦ Content part:', JSON.stringify(contentPart))
console.log('ğŸ“Š Accumulated content length:', accumulatedContent.value.length)
// âŒ å¤§é‡ console.log æœªç§»é™¤

å½±å“:
âŒ ç”Ÿäº§ç¯å¢ƒæ€§èƒ½å½±å“
âŒ å¯èƒ½æ³„éœ²æ•æ„Ÿä¿¡æ¯
âŒ æ§åˆ¶å°æ±¡æŸ“
```

#### é—®é¢˜ I: é­”æ³•æ•°å­—

```javascript
// ç¡¬ç¼–ç å€¼
bottom: 210px      // âŒ é­”æ³•æ•°å­—
height: '48px'     // âŒ é­”æ³•æ•°å­—
width: 200px       // âŒ é­”æ³•æ•°å­—
margin: 5px 10px   // âŒ é­”æ³•æ•°å­—

åº”è¯¥:
--spacing-bottom: var(--space-xxl);
--avatar-size: var(--size-lg);
--input-width: var(--input-width-medium);
--card-margin: var(--space-sm) var(--space-md);
```

---

### 2.4 æ€§èƒ½é—®é¢˜ ğŸŸ¢ è½»å¾®

#### é—®é¢˜ J: å‰ç«¯æ€§èƒ½ç“¶é¢ˆ

```
é—®é¢˜åˆ—è¡¨:
1. âŒ æ— è™šæ‹Ÿæ»šåŠ¨ (é•¿åˆ—è¡¨åœºæ™¯)
2. âŒ æ— ç»„ä»¶æ‡’åŠ è½½
3. âŒ æ— å›¾ç‰‡æ‡’åŠ è½½
4. âŒ å¤§é‡ console.log
5. âŒ map æ“ä½œé¢‘ç¹åˆ›å»ºæ–°æ•°ç»„
6. âŒ å›¾æ ‡ç»„ä»¶é‡å¤æ¸²æŸ“
7. âŒ æœªä½¿ç”¨ computed ç¼“å­˜
8. âŒ æœªä½¿ç”¨é˜²æŠ–/èŠ‚æµ

å½±å“:
- é¦–å±åŠ è½½æ…¢ (>2s)
- å†…å­˜å ç”¨é«˜
- CPU ä½¿ç”¨ç‡é«˜
- ç”µæ± æ¶ˆè€—å¿« (ç§»åŠ¨ç«¯)
```

---

## ä¸‰ã€åç«¯é—®é¢˜åˆ†æ

### 3.1 æ¶æ„é—®é¢˜ ğŸ”´ ä¸¥é‡

#### é—®é¢˜ K: å·¨å‹æ–‡ä»¶ (è¿åå•ä¸€èŒè´£åŸåˆ™)

```
å·¨å‹æ–‡ä»¶åˆ—è¡¨:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. backend/data/openai_api.go
   - 1999 è¡Œä»£ç 
   - 55 ä¸ªå‡½æ•°
   - é›†æˆ 6+ ä¸ª AI å¹³å°
   - âŒ éœ€è¦æ‹†åˆ†ä¸º 5-7 ä¸ªæ–‡ä»¶

2. backend/data/stock_data_api.go
   - 1813 è¡Œä»£ç 
   - 64 ä¸ªå‡½æ•°
   - è‚¡ç¥¨æ•°æ®è·å–/å¤„ç†
   - âŒ éœ€è¦æŒ‰ä¸šåŠ¡æ‹†åˆ†

3. backend/data/market_news_api.go
   - 1164 è¡Œä»£ç 
   - å¸‚åœºèµ„è®¯/ç ”æŠ¥/å…¬å‘Š
   - âŒ åŠŸèƒ½è€¦åˆä¸¥é‡

å½±å“:
âŒ éš¾ä»¥ç»´æŠ¤
âŒ éš¾ä»¥æµ‹è¯•
âŒ ä»£ç å®¡æŸ¥å›°éš¾
âŒ åä½œå†²çªé¢‘ç¹
âŒ IDE æ€§èƒ½ä¸‹é™
```

#### é—®é¢˜ L: ç¼ºä¹åˆ†å±‚æ¶æ„

```
å½“å‰æ¶æ„:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Controller (app.go)
    â†“ (ç›´æ¥è°ƒç”¨)
Data Layer (data/*.go)
    â†“ (ç›´æ¥è°ƒç”¨)
Database (GORM)

é—®é¢˜:
âŒ æ—  Service Layer (ä¸šåŠ¡é€»è¾‘å±‚)
âŒ æ—  Repository Layer (æ•°æ®è®¿é—®æŠ½è±¡)
âŒ ä¸šåŠ¡é€»è¾‘ä¸æ•°æ®è®¿é—®è€¦åˆ
âŒ æ— äº‹åŠ¡ç®¡ç†
âŒ æ— å•å…ƒæµ‹è¯•å¯èƒ½

åº”è¯¥:
Controller â†’ Service â†’ Repository â†’ Database
           (ä¸šåŠ¡é€»è¾‘)  (æ•°æ®è®¿é—®)
```

#### é—®é¢˜ M: é”™è¯¯å¤„ç†ä¸ç»Ÿä¸€

```go
// å½“å‰ä»£ç ä¸­çš„ä¸ä¸€è‡´å¤„ç†

// æ–¹å¼ 1: è®°å½•æ—¥å¿—åè¿”å› nil
if err != nil {
    logger.SugaredLogger.Errorf("error: %v", err)
    return nil
}

// æ–¹å¼ 2: ç›´æ¥å¿½ç•¥é”™è¯¯
// logger.SugaredLogger.Debugf("value: %+v", string(bytes))
// æ³¨é‡Šæ‰ï¼Œä¸å¤„ç†

// æ–¹å¼ 3: è¿”å›ç©ºç»“æ„ä½“
if err != nil {
    return AIResponseResult{}
}

// æ–¹å¼ 4: panic (æå°‘ä½†å­˜åœ¨)
if err != nil {
    panic(err)
}

å½±å“:
âŒ é”™è¯¯ä¿¡æ¯ä¸ä¸€è‡´
âŒ è°ƒè¯•å›°éš¾
âŒ æ— æ³•è¿½è¸ªé”™è¯¯é“¾
âŒ æ— ç»Ÿä¸€çš„é”™è¯¯ç 
```

---

### 3.2 æ•°æ®è®¿é—®é—®é¢˜ ğŸŸ¡ ä¸­ç­‰

#### é—®é¢˜ N: SQL æ³¨å…¥é£é™©

```go
// å­˜åœ¨åŸç”Ÿ SQL æŸ¥è¯¢
db.Raw("SELECT * FROM stock_base_info WHERE name LIKE ?", "%" + keyword + "%")

// âŒ è™½ç„¶ä½¿ç”¨äº† ? å‚æ•°åŒ–ï¼Œä½†éƒ¨åˆ†åœ°æ–¹å¯èƒ½ä¸å®‰å…¨
// âŒ ç¼ºä¹ç»Ÿä¸€çš„æŸ¥è¯¢æ„å»ºå™¨
// âŒ ç¼ºä¹è¾“å…¥éªŒè¯

é£é™©:
ğŸ”´ SQL æ³¨å…¥æ”»å‡»
ğŸ”´ æ•°æ®æ³„éœ²
```

#### é—®é¢˜ O: æ•°æ®åº“è¿æ¥æ± æœªä¼˜åŒ–

```go
// pool.go ä¸­çš„é—®é¢˜
var Pool = &sync.Pool{
    New: func() interface{} {
        return &chromedp.Context{}
    },
}

// âŒ æ— æœ€å¤§è¿æ¥æ•°é™åˆ¶
// âŒ æ— è¿æ¥è¶…æ—¶è®¾ç½®
// âŒ æ— è¿æ¥å¥åº·æ£€æŸ¥
// âŒ å¯èƒ½å¯¼è‡´è¿æ¥æ³„éœ²

é£é™©:
ğŸ”´ æ•°æ®åº“è¿æ¥è€—å°½
ğŸ”´ å†…å­˜æ³„éœ²
```

#### é—®é¢˜ P: ç¼ºä¹ç´¢å¼•ä¼˜åŒ–

```sql
-- å½“å‰è¡¨ç»“æ„
CREATE TABLE ai_response_result (
    id INTEGER PRIMARY KEY,
    question TEXT,
    answer TEXT,
    created_at DATETIME
);

-- âŒ æ— ç´¢å¼•
-- âŒ æŸ¥è¯¢å…¨è¡¨æ‰«æ
-- âŒ é«˜å¹¶å‘ä¸‹æ€§èƒ½å·®

åº”è¯¥:
CREATE INDEX idx_question ON ai_response_result(question);
CREATE INDEX idx_created_at ON ai_response_result(created_at);
```

---

### 3.3 é…ç½®ç®¡ç†é—®é¢˜ ğŸŸ¡ ä¸­ç­‰

#### é—®é¢˜ Q: é…ç½®åˆ†æ•£

```go
// é…ç½®åˆ†æ•£åœ¨å¤šä¸ªåœ°æ–¹
1. settings_api.go - ç³»ç»Ÿè®¾ç½®
2. models.go - æ•°æ®æ¨¡å‹ä¸­çš„é…ç½®
3. app.go - åº”ç”¨é…ç½®
4. ç¯å¢ƒå˜é‡

// âŒ OldSettings ä¸æ–°é…ç½®å¹¶å­˜
type OldSettings struct { ... }
type Settings struct { ... }

// âŒ æ— é…ç½®éªŒè¯
// âŒ æ— é…ç½®çƒ­æ›´æ–°
// âŒ æ— é…ç½®ç‰ˆæœ¬ç®¡ç†

å½±å“:
âŒ é…ç½®ä¸ä¸€è‡´
âŒ è¿ç§»å›°éš¾
âŒ å›æ»šå¤æ‚
```

---

### 3.4 å¹¶å‘å®‰å…¨é—®é¢˜ ğŸŸ¡ ä¸­ç­‰

#### é—®é¢˜ R: å…¨å±€å˜é‡æœªåŠ é”

```go
// å…¨å±€å˜é‡
var GlobalConfig *Settings
var CurrentUser *User

// âŒ å¤š goroutine è®¿é—®æ— é”ä¿æŠ¤
// âŒ å¯èƒ½å‡ºç°æ•°æ®ç«äº‰
// âŒ å¯èƒ½å¯¼è‡´ panic

é£é™©:
ğŸ”´ æ•°æ®ç«äº‰
ğŸ”´ ç¨‹åºå´©æºƒ
```

---

### 3.5 AI Agent é—®é¢˜ ğŸ”´ ä¸¥é‡

#### é—®é¢˜ S: æµå¼è¾“å‡ºå¤„ç†ä¸å¯é 

```go
// agent_api.go ä¸­çš„æµå¼è¾“å‡º
for {
    msg, err := sr.Recv()
    if err != nil {
        if errors.Is(err, io.EOF) {
            break  // âœ… æ­£å¸¸ç»“æŸ
        }
        logger.SugaredLogger.Errorf("failed to recv: %v", err)
        break  // âŒ ç›´æ¥ breakï¼Œæ— é‡è¯•
    }
    ch <- msg  // âŒ å‘é€åˆ° channelï¼Œå¯èƒ½é˜»å¡
}

é—®é¢˜:
âŒ æ— è¶…æ—¶æ§åˆ¶
âŒ æ— é”™è¯¯æ¢å¤
âŒ channel å¯èƒ½é˜»å¡
âŒ å‰ç«¯çŠ¶æ€å¯èƒ½ä¸ä¸€è‡´
```

#### é—®é¢˜ T: Agent å·¥å…·ç¼ºå°‘é”™è¯¯å¤„ç†

```go
// tools/*.go ä¸­çš„å·¥å…·å‡½æ•°
func (s *StockKLineDataTool) Run(ctx context.Context, args ...any) (*schema.Message, error) {
    // âŒ éƒ¨åˆ†å·¥å…·ç¼ºå°‘å‚æ•°éªŒè¯
    // âŒ é”™è¯¯å¤„ç†ä¸ç»Ÿä¸€
    // âŒ æ— è¶…æ—¶æ§åˆ¶
    // âŒ æ— é™çº§æ–¹æ¡ˆ

å½±å“:
ğŸ”´ Agent è°ƒç”¨é“¾ä¸­æ–­
ğŸ”´ ç”¨æˆ·ä½“éªŒå·®
```

---

## å››ã€æ•°æ®åº“é—®é¢˜åˆ†æ

### 4.1 è¡¨è®¾è®¡é—®é¢˜

#### é—®é¢˜ U: ç¼ºä¹ç»Ÿä¸€çš„è½¯åˆ é™¤

```go
// éƒ¨åˆ†è¡¨æœ‰è½¯åˆ é™¤
IsDel soft_delete.DeletedAt `gorm:"softDelete:flag"`

// éƒ¨åˆ†è¡¨æ²¡æœ‰
type Telegraph struct {
    DeletedAt gorm.DeletedAt `gorm:"index"`
}

// âŒ ä¸ä¸€è‡´
// âŒ æ— ç»Ÿä¸€çš„è½¯åˆ é™¤ç­–ç•¥
```

#### é—®é¢˜ V: ç¼ºä¹æ•°æ®è¿ç§»

```
å½“å‰çŠ¶æ€:
âŒ æ— ç‰ˆæœ¬åŒ–è¿ç§»è„šæœ¬
âŒ è¡¨ç»“æ„å˜æ›´æ— å›æ»šæœºåˆ¶
âŒ æ— æ•°æ®è¿ç§»è®°å½•
âŒ æ‰‹åŠ¨æ‰§è¡Œ SQL

é£é™©:
ğŸ”´ æ•°æ®ä¸¢å¤±
ğŸ”´ å›æ»šå›°éš¾
ğŸ”´ ç‰ˆæœ¬ä¸ä¸€è‡´
```

---

## äº”ã€å®‰å…¨é—®é¢˜åˆ†æ

### 5.1 å¯†é’¥ç®¡ç† ğŸ”´ ä¸¥é‡

#### é—®é¢˜ W: API Key æ˜æ–‡å­˜å‚¨

```go
// settings_api.go
type AIConfig struct {
    APIKey string  // âŒ æ˜æ–‡å­˜å‚¨
    BaseURL string
    Model string
}

// âŒ æ•°æ®åº“ä¸­æ˜æ–‡å­˜å‚¨
// âŒ æ— åŠ å¯†ä¿æŠ¤
// âŒ å¯èƒ½è¢«å¯¼å‡ºæ³„éœ²

é£é™©:
ğŸ”´ å¯†é’¥æ³„éœ²
ğŸ”´ è´¦æˆ·è¢«ç›—ç”¨
ğŸ”´ è´¢åŠ¡æŸå¤±
```

#### é—®é¢˜ X: XSS é£é™©

```vue
<!-- å‰ç«¯ä»£ç  -->
<div v-html="renderedMarkdown"></div>

<!-- âŒ æœªå¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œè½¬ä¹‰ -->
<!-- âŒ å¯èƒ½æ³¨å…¥æ¶æ„è„šæœ¬ -->

é£é™©:
ğŸ”´ è„šæœ¬æ³¨å…¥
ğŸ”´ Cookie çªƒå–
ğŸ”´ ä¼šè¯åŠ«æŒ
```

---

### 5.2 ç½‘ç»œå®‰å…¨ ğŸŸ¡ ä¸­ç­‰

#### é—®é¢˜ Y: CORS æœªé…ç½®

```go
// Wails ç»‘å®šé»˜è®¤å…è®¸æ‰€æœ‰æ¥æº
// âŒ æ—  CORS é…ç½®
// âŒ å¯èƒ½è¢«è·¨åŸŸæ”»å‡»

é£é™©:
ğŸ”´ CSRF æ”»å‡»
ğŸ”´ æ•°æ®æ³„éœ²
```

---

## å…­ã€æ€§èƒ½é—®é¢˜åˆ†æ

### 6.1 ç¼“å­˜ç­–ç•¥ç¼ºå¤±

```
å½“å‰çŠ¶æ€:
âŒ æ—  Redis/Memcached
âŒ æ— å†…å­˜ç¼“å­˜ç­–ç•¥
âŒ API é‡å¤è°ƒç”¨
âŒ æ•°æ®é‡å¤æŸ¥è¯¢

å½±å“:
âŒ å“åº”æ…¢
âŒ èµ„æºæµªè´¹
âŒ æœåŠ¡å™¨å‹åŠ›å¤§
```

### 6.2 å¤§é‡è°ƒè¯•æ—¥å¿—

```go
// ä»£ç ä¸­å¤§é‡æ³¨é‡Šæ‰çš„æ—¥å¿—
// logger.SugaredLogger.Debugf("value: %+v", string(bytes))
// logger.SugaredLogger.Infof("stock info: %+v", stockInfo)

// âŒ ç”Ÿäº§ç¯å¢ƒåº”è¯¥å…³é—­
// âŒ å¯èƒ½æ³„éœ²æ•æ„Ÿä¿¡æ¯
// âŒ å½±å“æ€§èƒ½
```

---

## ä¸ƒã€æµ‹è¯•é—®é¢˜åˆ†æ

### 7.1 æµ‹è¯•è¦†ç›–ä¸è¶³

```
å½“å‰çŠ¶æ€:
âŒ å•å…ƒæµ‹è¯•è¦†ç›–ç‡ < 10%
âŒ æ— é›†æˆæµ‹è¯•
âŒ æ— ç«¯åˆ°ç«¯æµ‹è¯•
âŒ Mock æ•°æ®ä¸å®Œæ•´

å½±å“:
âŒ é‡æ„é£é™©é«˜
âŒ Bug ä¿®å¤å›°éš¾
âŒ è´¨é‡æ— æ³•ä¿è¯
```

---

## å…«ã€æ–‡æ¡£é—®é¢˜åˆ†æ

### 8.1 æ–‡æ¡£ç¼ºå¤±

```
å½“å‰çŠ¶æ€:
âœ… README.md åŸºæœ¬å®Œæ•´
âœ… API.md æœ‰éƒ¨åˆ†æ–‡æ¡£
âŒ æ— å¼€å‘æŒ‡å—
âŒ æ— éƒ¨ç½²æ–‡æ¡£
âŒ æ— æ¶æ„æ–‡æ¡£
âŒ æ— è´¡çŒ®æŒ‡å—

å½±å“:
âŒ æ–°äººä¸Šæ‰‹å›°éš¾
âŒ åä½œæ•ˆç‡ä½
âŒ çŸ¥è¯†æ— æ³•ä¼ æ‰¿
```

---

## ä¹ã€é—®é¢˜æ±‡æ€»ä¸ä¼˜å…ˆçº§

### 9.1 P0 ğŸ”´ ç´§æ€¥ (ç«‹å³å¤„ç†)

| ID | é—®é¢˜ | å½±å“ | ä½ç½® |
|----|------|------|------|
| D | agent-chat.vue æ¸²æŸ“é—®é¢˜ | æ ¸å¿ƒåŠŸèƒ½ä¸å¯ç”¨ | frontend/src/components/agent-chat.vue |
| K | å·¨å‹æ–‡ä»¶ (1999è¡Œ) | æ— æ³•ç»´æŠ¤ | backend/data/openai_api.go |
| W | API Key æ˜æ–‡å­˜å‚¨ | å®‰å…¨é£é™© | backend/data/settings_api.go |

### 9.2 P1 ğŸŸ¡ é‡è¦ (è¿‘æœŸå¤„ç†)

| ID | é—®é¢˜ | å½±å“ | ä½ç½® |
|----|------|------|------|
| B | çŠ¶æ€ç®¡ç†ç¼ºå¤± | æ¶æ„é—®é¢˜ | å…¨å‰ç«¯ |
| L | ç¼ºä¹åˆ†å±‚æ¶æ„ | æ¶æ„é—®é¢˜ | å…¨åç«¯ |
| M | é”™è¯¯å¤„ç†ä¸ç»Ÿä¸€ | å¯ç»´æŠ¤æ€§ | å…¨åç«¯ |
| S | æµå¼è¾“å‡ºä¸å¯é  | åŠŸèƒ½é—®é¢˜ | backend/agent/agent_api.go |
| X | XSS é£é™© | å®‰å…¨é£é™© | å‰ç«¯æ‰€æœ‰ v-html |

### 9.3 P2 ğŸŸ¢ ä¸€èˆ¬ (é•¿æœŸä¼˜åŒ–)

| ID | é—®é¢˜ | å½±å“ | ä½ç½® |
|----|------|------|------|
| G | ä»£ç é‡å¤ | ç»´æŠ¤æˆæœ¬ | å¤šå¤„ |
| H | è°ƒè¯•ä»£ç æœªæ¸…ç† | æ€§èƒ½/å®‰å…¨ | å¤šå¤„ |
| J | å‰ç«¯æ€§èƒ½é—®é¢˜ | ç”¨æˆ·ä½“éªŒ | å‰ç«¯ |
| U | è½¯åˆ é™¤ä¸ç»Ÿä¸€ | æ•°æ®ä¸€è‡´æ€§ | æ•°æ®åº“ |

---

## åã€æ”¹é€ å»ºè®®

### 10.1 çŸ­æœŸ (1-2 å‘¨)

```
ç´§æ€¥ä¿®å¤:
â–¡ ä¿®å¤ agent-chat.vue æ¸²æŸ“é—®é¢˜
â–¡ æ‹†åˆ†å·¨å‹æ–‡ä»¶ (openai_api.go â†’ 5-7 ä¸ªæ–‡ä»¶)
â–¡ API Key åŠ å¯†å­˜å‚¨
â–¡ ç»Ÿä¸€é”™è¯¯å¤„ç†
```

### 10.2 ä¸­æœŸ (3-4 å‘¨)

```
æ¶æ„ä¼˜åŒ–:
â–¡ å¼•å…¥ Pinia çŠ¶æ€ç®¡ç†
â–¡ å®ç° Service å±‚
â–¡ å®ç° Repository å±‚
â–¡ ä¼˜åŒ–æ•°æ®åº“ç´¢å¼•
â–¡ æ·»åŠ å•å…ƒæµ‹è¯•
```

### 10.3 é•¿æœŸ (5-8 å‘¨)

```
å…¨é¢æå‡:
â–¡ ç»„ä»¶åº“ç»Ÿä¸€ (å…¨éƒ¨è¿ç§»åˆ° Naive UI)
â–¡ æ€§èƒ½ä¼˜åŒ– (è™šæ‹Ÿæ»šåŠ¨ã€æ‡’åŠ è½½)
â–¡ æµ‹è¯•è¦†ç›– (ç›®æ ‡ 70%)
â–¡ æ–‡æ¡£å®Œå–„ (å¼€å‘æŒ‡å—ã€æ¶æ„æ–‡æ¡£)
â–¡ CI/CD æ­å»º
```

---

## åä¸€ã€é£é™©è¯„ä¼°

### 11.1 æŠ€æœ¯é£é™©

```
é«˜é£é™©:
ğŸ”´ æ¸²æŸ“é—®é¢˜å¯¼è‡´æ ¸å¿ƒåŠŸèƒ½ä¸å¯ç”¨
ğŸ”´ å·¨å‹æ–‡ä»¶å¯¼è‡´æ— æ³•ç»´æŠ¤
ğŸ”´ API Key æ˜æ–‡å­˜å‚¨å¯¼è‡´å®‰å…¨é£é™©

ä¸­é£é™©:
ğŸŸ¡ æ¶æ„æ··ä¹±å¯¼è‡´å¼€å‘æ•ˆç‡ä½
ğŸŸ¡ æµ‹è¯•ç¼ºå¤±å¯¼è‡´é‡æ„é£é™©é«˜
```

### 11.2 ä¸šåŠ¡é£é™©

```
ğŸ”´ AI åŠŸèƒ½ä¸ç¨³å®šå½±å“ç”¨æˆ·ä¿¡ä»»
ğŸŸ¡ æ€§èƒ½é—®é¢˜å½±å“ç”¨æˆ·ä½“éªŒ
ğŸŸ¡ ç§»åŠ¨ç«¯æ— æ³•ä½¿ç”¨é™åˆ¶ç”¨æˆ·ç¾¤
```

---

## åäºŒã€æ€»ç»“

### 12.1 æ ¸å¿ƒé—®é¢˜

1. **æ¶æ„æ··ä¹±**: ç¼ºä¹åˆ†å±‚ï¼ŒèŒè´£ä¸æ¸…
2. **ä»£ç è´¨é‡å·®**: å·¨å‹æ–‡ä»¶ã€é‡å¤ä»£ç ã€è°ƒè¯•ä»£ç 
3. **å®‰å…¨é£é™©**: API Key æ˜æ–‡ã€XSS é£é™©
4. **åŠŸèƒ½ç¼ºé™·**: æ¸²æŸ“é—®é¢˜ã€äº¤äº’ä¸å®Œæ•´
5. **æ€§èƒ½é—®é¢˜**: æ— ç¼“å­˜ã€æ— ä¼˜åŒ–
6. **æµ‹è¯•ç¼ºå¤±**: è¦†ç›–ç‡ä½
7. **æ–‡æ¡£ä¸è¶³**: å¼€å‘æŒ‡å—ç¼ºå¤±

### 12.2 æ”¹é€ è·¯çº¿

```
Phase 1 (ç´§æ€¥): ä¿®å¤æ ¸å¿ƒåŠŸèƒ½ + å®‰å…¨é—®é¢˜
Phase 2 (æ¶æ„): åˆ†å±‚é‡æ„ + çŠ¶æ€ç®¡ç†
Phase 3 (è´¨é‡): ä»£ç è§„èŒƒ + æµ‹è¯•è¦†ç›–
Phase 4 (ä¼˜åŒ–): æ€§èƒ½æå‡ + æ–‡æ¡£å®Œå–„
```

### 12.3 é¢„æœŸæ”¶ç›Š

- âœ… åŠŸèƒ½ç¨³å®šæ€§æå‡ 80%
- âœ… ä»£ç å¯ç»´æŠ¤æ€§æå‡ 60%
- âœ… å¼€å‘æ•ˆç‡æå‡ 40%
- âœ… ç”¨æˆ·ä½“éªŒæå‡ 50%
- âœ… å®‰å…¨æ€§æå‡ 90%

---

*æ–‡æ¡£ç‰ˆæœ¬: v1.0*
*åˆ†ææ—¥æœŸ: 2025-01-17*
*åˆ†ææ–‡ä»¶æ•°: 101*
*å‘ç°é—®é¢˜æ•°: 50+*
*ä¼˜å…ˆçº§åˆ†ç±»: P0(3) + P1(5) + P2(4)*
